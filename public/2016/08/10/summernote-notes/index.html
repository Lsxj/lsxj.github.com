<!DOCTYPE html>


  <html class="light page-post">


<head>
  <meta charset="utf-8">
  
  <title>summernote编辑器插件使用笔记 | 你看见过我的小熊吗</title>

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
    <meta name="keywords" content="javascript,jQuery,jQuery插件,summernote," />
  

  <meta name="description" content="这次项目中需要用到编辑器插件，于是上网查了一下。由于需要的编辑器功能比较简单，不需要太多复杂功能，所以选择了一款特别轻量的summernote插件，而且后台操作也很简单。官网：http://summernote.org/github地址：https://github.com/summernote/summernote
先来看一下官网的截图

麻雀虽小五脏俱全。完全可以满足编辑器的需要。
按照官网链">
<meta property="og:type" content="article">
<meta property="og:title" content="summernote编辑器插件使用笔记">
<meta property="og:url" content="http://yoursite.com/2016/08/10/summernote-notes/index.html">
<meta property="og:site_name" content="你看见过我的小熊吗">
<meta property="og:description" content="这次项目中需要用到编辑器插件，于是上网查了一下。由于需要的编辑器功能比较简单，不需要太多复杂功能，所以选择了一款特别轻量的summernote插件，而且后台操作也很简单。官网：http://summernote.org/github地址：https://github.com/summernote/summernote
先来看一下官网的截图

麻雀虽小五脏俱全。完全可以满足编辑器的需要。
按照官网链">
<meta property="og:image" content="http://oao50r2ex.bkt.clouddn.com/image/blog0810_1.png">
<meta property="og:image" content="http://oao50r2ex.bkt.clouddn.com/image/blog0810_5.png">
<meta property="og:image" content="http://oao50r2ex.bkt.clouddn.com/image/blog0810_2.png">
<meta property="og:image" content="http://oao50r2ex.bkt.clouddn.com/image/blog0810_3.png">
<meta property="og:image" content="http://oao50r2ex.bkt.clouddn.com/image/blog0810_4.png">
<meta property="og:updated_time" content="2017-11-20T14:27:01.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="summernote编辑器插件使用笔记">
<meta name="twitter:description" content="这次项目中需要用到编辑器插件，于是上网查了一下。由于需要的编辑器功能比较简单，不需要太多复杂功能，所以选择了一款特别轻量的summernote插件，而且后台操作也很简单。官网：http://summernote.org/github地址：https://github.com/summernote/summernote
先来看一下官网的截图

麻雀虽小五脏俱全。完全可以满足编辑器的需要。
按照官网链">
<meta name="twitter:image" content="http://oao50r2ex.bkt.clouddn.com/image/blog0810_1.png">

  

  
    <link rel="icon" href="/favicon.ico">
  

  <link href="/css/styles.css?v=028c63b1" rel="stylesheet">


  
    <link rel="stylesheet" href="/css/personal-style.css">
  

  

  
  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?57e94d016e201fba3603a8a2b0263af0";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>


</head>

<body>


  
    <span id="toolbox-mobile" class="toolbox-mobile">盒子</span>
  

  <div class="post-header CENTER">
   
  <div class="toolbox">
    <a class="toolbox-entry" href="/">
      <span class="toolbox-entry-text">盒子</span>
      <i class="icon-angle-down"></i>
      <i class="icon-home"></i>
    </a>
    <ul class="list-toolbox">
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/archives/"
            target="_self"
            >
            博客
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/category/"
            target="_self"
            >
            分类
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/tag/"
            target="_self"
            >
            标签
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/link/"
            target="_self"
            >
            友链
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/about/"
            target="_self"
            >
            关于
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/atom.xml"
            target="_blank"
            >
            RSS
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/search/"
            target="_self"
            >
            搜索
          </a>
        </li>
      
    </ul>
  </div>


</div>


  <div id="toc" class="toc-article">
    <strong class="toc-title">文章目录</strong>
    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#summernote-js"><span class="toc-text">summernote.js</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#定义"><span class="toc-text">定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#更改工具栏图标"><span class="toc-text">更改工具栏图标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#设置placeholder"><span class="toc-text">设置placeholder:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#设置toolbar"><span class="toc-text">设置toolbar</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#更改图片上传的方式："><span class="toc-text">更改图片上传的方式：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#设置编辑器中的值："><span class="toc-text">设置编辑器中的值：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#获取编辑器中的值："><span class="toc-text">获取编辑器中的值：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#上传附件"><span class="toc-text">上传附件</span></a></li></ol></li></ol>
  </div>



<div class="content content-post CENTER">
   <article id="post-summernote-notes" class="article article-type-post" itemprop="blogPost">
  <header class="article-header">
    <h1 class="post-title">summernote编辑器插件使用笔记</h1>

    <div class="article-meta">
      <span>
        <i class="icon-calendar"></i>
        <span>2016.08.10</span>
      </span>

      
        <span class="article-author">
          <i class="icon-user"></i>
          <span>Lsxj</span>
        </span>
      

      
  <span class="article-category">
    <i class="icon-list"></i>
    <a class="article-category-link" href="/categories/前端开发/">前端开发</a>
  </span>



      
        <span>
          <i class="icon-comment"></i>
          <a href="http://lsxj615.info/2016/08/10/summernote-notes/#disqus_thread"></a>
        </span>
      

    </div>
  </header>

  <div class="article-content">
    
      <p>这次项目中需要用到编辑器插件，于是上网查了一下。由于需要的编辑器功能比较简单，不需要太多复杂功能，所以选择了一款特别轻量的summernote插件，而且后台操作也很简单。<br>官网：<a href="http://summernote.org/" target="_blank" rel="external">http://summernote.org/</a><br>github地址：<a href="https://github.com/summernote/summernote" target="_blank" rel="external">https://github.com/summernote/summernote</a></p>
<p>先来看一下官网的截图</p>
<p><img src="http://oao50r2ex.bkt.clouddn.com/image/blog0810_1.png" alt="官网截图"></p>
<p>麻雀虽小五脏俱全。完全可以满足编辑器的需要。</p>
<p>按照官网链接下载下来的是</p>
<p><img src="http://oao50r2ex.bkt.clouddn.com/image/blog0810_5.png" alt="clipboard.png"></p>
<p>我们需要使用的是在dist文件夹内</p>
<p><img src="http://oao50r2ex.bkt.clouddn.com/image/blog0810_2.png" alt="clipboard.png"></p>
<p>其中font主要是编辑器内的图标显示，lang是各种语言，css则是样式。我们主要来看一下summernote.js。</p>
<h2 id="summernote-js"><a href="#summernote-js" class="headerlink" title="summernote.js"></a>summernote.js</h2><h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><pre><code>$.fn.extend({
   summernote: function () {
     var type = $.type(list.head(arguments));
     var isExternalAPICalled = type === &apos;string&apos;;
     var hasInitOptions = type === &apos;object&apos;;

     var options = hasInitOptions ? list.head(arguments) : {};

     options = $.extend({}, $.summernote.options, options);
     options.langInfo = $.extend(true, {}, $.summernote.lang[&apos;en-US&apos;], $.summernote.lang[options.lang]);

     this.each(function (idx, note) {
       var $note = $(note);
       if (!$note.data(&apos;summernote&apos;)) {
         var context = new Context($note, options);
         $note.data(&apos;summernote&apos;, context);
         $note.data(&apos;summernote&apos;).triggerEvent(&apos;init&apos;, context.layoutInfo);
       }
     });

     var $note = this.first();
     if ($note.length) {
       var context = $note.data(&apos;summernote&apos;);
       if (isExternalAPICalled) {
         return context.invoke.apply(context, list.from(arguments));
       } else if (options.focus) {
         context.invoke(&apos;editor.focus&apos;);
       }
     }

     return this;
   }
 });
</code></pre><p>这就是初始化summernote时执行的函数。</p>
<pre><code>$.extend(object) 可以理解为JQuery 添加一个静态方法。
$.fn.extend(object) 可以理解为JQuery实例添加一个方法。
</code></pre><p>默认的options如下</p>
<pre><code>options: {
  modules: {
    &apos;editor&apos;: Editor,
    &apos;clipboard&apos;: Clipboard,
    &apos;dropzone&apos;: Dropzone,
    &apos;codeview&apos;: Codeview,
    &apos;statusbar&apos;: Statusbar,
    &apos;fullscreen&apos;: Fullscreen,
    &apos;handle&apos;: Handle,
    // FIXME: HintPopover must be front of autolink
    //  - Script error about range when Enter key is pressed on hint popover
    &apos;hintPopover&apos;: HintPopover,
    &apos;autoLink&apos;: AutoLink,
    &apos;autoSync&apos;: AutoSync,
    &apos;placeholder&apos;: Placeholder,
    &apos;buttons&apos;: Buttons,
    &apos;toolbar&apos;: Toolbar,
    &apos;linkDialog&apos;: LinkDialog,
    &apos;linkPopover&apos;: LinkPopover,
    &apos;imageDialog&apos;: ImageDialog,
    &apos;imagePopover&apos;: ImagePopover,
    &apos;videoDialog&apos;: VideoDialog,
    &apos;helpDialog&apos;: HelpDialog,
    &apos;airPopover&apos;: AirPopover
  },

  buttons: {},

  lang: &apos;zh-CN&apos;,

  // toolbar工具栏默认
  toolbar: [
    [&apos;style&apos;, [&apos;style&apos;]],
    [&apos;font&apos;, [&apos;bold&apos;, &apos;underline&apos;, &apos;clear&apos;]],
    [&apos;fontname&apos;, [&apos;fontname&apos;]],
    [&apos;color&apos;, [&apos;color&apos;]],
    [&apos;para&apos;, [&apos;ul&apos;, &apos;ol&apos;, &apos;paragraph&apos;]],
    [&apos;table&apos;, [&apos;table&apos;]],
    [&apos;insert&apos;, [&apos;link&apos;, &apos;picture&apos;, &apos;video&apos;]],
    [&apos;view&apos;, [&apos;fullscreen&apos;, &apos;codeview&apos;, &apos;help&apos;]]
  ],

  // popover
  popover: {
    image: [
      [&apos;imagesize&apos;, [&apos;imageSize100&apos;, &apos;imageSize50&apos;, &apos;imageSize25&apos;]],
      [&apos;float&apos;, [&apos;floatLeft&apos;, &apos;floatRight&apos;, &apos;floatNone&apos;]],
      [&apos;remove&apos;, [&apos;removeMedia&apos;]]
    ],
    link: [
      [&apos;link&apos;, [&apos;linkDialogShow&apos;, &apos;unlink&apos;]]
    ],
    air: [
      [&apos;color&apos;, [&apos;color&apos;]],
      [&apos;font&apos;, [&apos;bold&apos;, &apos;underline&apos;, &apos;clear&apos;]],
      [&apos;para&apos;, [&apos;ul&apos;, &apos;paragraph&apos;]],
      [&apos;table&apos;, [&apos;table&apos;]],
      [&apos;insert&apos;, [&apos;link&apos;, &apos;picture&apos;]]
    ]
  },

  // air mode: inline editor
  airMode: false,

  width: null,
  height: null,

  focus: false,
  tabSize: 4,
  styleWithSpan: false,
  shortcuts: true,
  textareaAutoSync: true,
  direction: null,

  styleTags: [&apos;p&apos;, &apos;blockquote&apos;, &apos;pre&apos;, &apos;h1&apos;, &apos;h2&apos;, &apos;h3&apos;, &apos;h4&apos;, &apos;h5&apos;, &apos;h6&apos;],

  fontNames: [
    &apos;Arial&apos;, &apos;Arial Black&apos;, &apos;Comic Sans MS&apos;, &apos;Courier New&apos;,
    &apos;Helvetica Neue&apos;, &apos;Helvetica&apos;, &apos;Impact&apos;, &apos;Lucida Grande&apos;,
    &apos;Tahoma&apos;, &apos;Times New Roman&apos;, &apos;Verdana&apos;
  ],

  fontSizes: [&apos;8&apos;, &apos;9&apos;, &apos;10&apos;, &apos;11&apos;, &apos;12&apos;, &apos;14&apos;, &apos;18&apos;, &apos;24&apos;, &apos;36&apos;],

  // pallete colors(n x n)
  colors: [
    [&apos;#000000&apos;, &apos;#424242&apos;, &apos;#636363&apos;, &apos;#9C9C94&apos;, &apos;#CEC6CE&apos;, &apos;#EFEFEF&apos;, &apos;#F7F7F7&apos;, &apos;#FFFFFF&apos;],
    [&apos;#FF0000&apos;, &apos;#FF9C00&apos;, &apos;#FFFF00&apos;, &apos;#00FF00&apos;, &apos;#00FFFF&apos;, &apos;#0000FF&apos;, &apos;#9C00FF&apos;, &apos;#FF00FF&apos;],
    [&apos;#F7C6CE&apos;, &apos;#FFE7CE&apos;, &apos;#FFEFC6&apos;, &apos;#D6EFD6&apos;, &apos;#CEDEE7&apos;, &apos;#CEE7F7&apos;, &apos;#D6D6E7&apos;, &apos;#E7D6DE&apos;],
    [&apos;#E79C9C&apos;, &apos;#FFC69C&apos;, &apos;#FFE79C&apos;, &apos;#B5D6A5&apos;, &apos;#A5C6CE&apos;, &apos;#9CC6EF&apos;, &apos;#B5A5D6&apos;, &apos;#D6A5BD&apos;],
    [&apos;#E76363&apos;, &apos;#F7AD6B&apos;, &apos;#FFD663&apos;, &apos;#94BD7B&apos;, &apos;#73A5AD&apos;, &apos;#6BADDE&apos;, &apos;#8C7BC6&apos;, &apos;#C67BA5&apos;],
    [&apos;#CE0000&apos;, &apos;#E79439&apos;, &apos;#EFC631&apos;, &apos;#6BA54A&apos;, &apos;#4A7B8C&apos;, &apos;#3984C6&apos;, &apos;#634AA5&apos;, &apos;#A54A7B&apos;],
    [&apos;#9C0000&apos;, &apos;#B56308&apos;, &apos;#BD9400&apos;, &apos;#397B21&apos;, &apos;#104A5A&apos;, &apos;#085294&apos;, &apos;#311873&apos;, &apos;#731842&apos;],
    [&apos;#630000&apos;, &apos;#7B3900&apos;, &apos;#846300&apos;, &apos;#295218&apos;, &apos;#083139&apos;, &apos;#003163&apos;, &apos;#21104A&apos;, &apos;#4A1031&apos;]
  ],

  lineHeights: [&apos;1.0&apos;, &apos;1.2&apos;, &apos;1.4&apos;, &apos;1.5&apos;, &apos;1.6&apos;, &apos;1.8&apos;, &apos;2.0&apos;, &apos;3.0&apos;],

  tableClassName: &apos;table table-bordered&apos;,

  insertTableMaxSize: {
    col: 10,
    row: 10
  },

  dialogsInBody: false,
  dialogsFade: false,

  maximumImageFileSize: null,

  callbacks: {
    onInit: null,//初始化回调函数
    onFocus: null,//聚集
    onBlur: null,//失去焦点
    onEnter: null,//回车键的回调函数
    onKeyup: null,
    onKeydown: null,
    onSubmit: null,//提交时回调函数
    onImageUpload: null,//这就是上传图片的回调函数
    onImageUploadError: null//上传图片出错
  },

  codemirror: {
    mode: &apos;text/html&apos;,
    htmlMode: true,
    lineNumbers: true
  },

  keyMap: {
    pc: {
      &apos;ENTER&apos;: &apos;insertParagraph&apos;,
      &apos;CTRL+Z&apos;: &apos;undo&apos;,
      &apos;CTRL+Y&apos;: &apos;redo&apos;,
      &apos;TAB&apos;: &apos;tab&apos;,
      &apos;SHIFT+TAB&apos;: &apos;untab&apos;,
      &apos;CTRL+B&apos;: &apos;bold&apos;,
      &apos;CTRL+I&apos;: &apos;italic&apos;,
      &apos;CTRL+U&apos;: &apos;underline&apos;,
      &apos;CTRL+SHIFT+S&apos;: &apos;strikethrough&apos;,
      &apos;CTRL+BACKSLASH&apos;: &apos;removeFormat&apos;,
      &apos;CTRL+SHIFT+L&apos;: &apos;justifyLeft&apos;,
      &apos;CTRL+SHIFT+E&apos;: &apos;justifyCenter&apos;,
      &apos;CTRL+SHIFT+R&apos;: &apos;justifyRight&apos;,
      &apos;CTRL+SHIFT+J&apos;: &apos;justifyFull&apos;,
      &apos;CTRL+SHIFT+NUM7&apos;: &apos;insertUnorderedList&apos;,
      &apos;CTRL+SHIFT+NUM8&apos;: &apos;insertOrderedList&apos;,
      &apos;CTRL+LEFTBRACKET&apos;: &apos;outdent&apos;,
      &apos;CTRL+RIGHTBRACKET&apos;: &apos;indent&apos;,
      &apos;CTRL+NUM0&apos;: &apos;formatPara&apos;,
      &apos;CTRL+NUM1&apos;: &apos;formatH1&apos;,
      &apos;CTRL+NUM2&apos;: &apos;formatH2&apos;,
      &apos;CTRL+NUM3&apos;: &apos;formatH3&apos;,
      &apos;CTRL+NUM4&apos;: &apos;formatH4&apos;,
      &apos;CTRL+NUM5&apos;: &apos;formatH5&apos;,
      &apos;CTRL+NUM6&apos;: &apos;formatH6&apos;,
      &apos;CTRL+ENTER&apos;: &apos;insertHorizontalRule&apos;,
      &apos;CTRL+K&apos;: &apos;linkDialog.show&apos;
    },

    mac: {
      &apos;ENTER&apos;: &apos;insertParagraph&apos;,
      &apos;CMD+Z&apos;: &apos;undo&apos;,
      &apos;CMD+SHIFT+Z&apos;: &apos;redo&apos;,
      &apos;TAB&apos;: &apos;tab&apos;,
      &apos;SHIFT+TAB&apos;: &apos;untab&apos;,
      &apos;CMD+B&apos;: &apos;bold&apos;,
      &apos;CMD+I&apos;: &apos;italic&apos;,
      &apos;CMD+U&apos;: &apos;underline&apos;,
      &apos;CMD+SHIFT+S&apos;: &apos;strikethrough&apos;,
      &apos;CMD+BACKSLASH&apos;: &apos;removeFormat&apos;,
      &apos;CMD+SHIFT+L&apos;: &apos;justifyLeft&apos;,
      &apos;CMD+SHIFT+E&apos;: &apos;justifyCenter&apos;,
      &apos;CMD+SHIFT+R&apos;: &apos;justifyRight&apos;,
      &apos;CMD+SHIFT+J&apos;: &apos;justifyFull&apos;,
      &apos;CMD+SHIFT+NUM7&apos;: &apos;insertUnorderedList&apos;,
      &apos;CMD+SHIFT+NUM8&apos;: &apos;insertOrderedList&apos;,
      &apos;CMD+LEFTBRACKET&apos;: &apos;outdent&apos;,
      &apos;CMD+RIGHTBRACKET&apos;: &apos;indent&apos;,
      &apos;CMD+NUM0&apos;: &apos;formatPara&apos;,
      &apos;CMD+NUM1&apos;: &apos;formatH1&apos;,
      &apos;CMD+NUM2&apos;: &apos;formatH2&apos;,
      &apos;CMD+NUM3&apos;: &apos;formatH3&apos;,
      &apos;CMD+NUM4&apos;: &apos;formatH4&apos;,
      &apos;CMD+NUM5&apos;: &apos;formatH5&apos;,
      &apos;CMD+NUM6&apos;: &apos;formatH6&apos;,
      &apos;CMD+ENTER&apos;: &apos;insertHorizontalRule&apos;,
      &apos;CMD+K&apos;: &apos;linkDialog.show&apos;
    }
  },
  icons: {
    &apos;align&apos;: &apos;icon-align&apos;,
    &apos;alignCenter&apos;: &apos;icon-align-center&apos;,
    &apos;alignJustify&apos;: &apos;icon-align-justify&apos;,
    &apos;alignLeft&apos;: &apos;icon-align-left&apos;,
    &apos;alignRight&apos;: &apos;icon-align-right&apos;,
    &apos;indent&apos;: &apos;icon-indent-right&apos;,
    &apos;outdent&apos;: &apos;icon-indent-left&apos;,
    &apos;arrowsAlt&apos;: &apos;icon-resize-full&apos;,
    &apos;bold&apos;: &apos;icon-bold&apos;,
    &apos;caret&apos;: &apos;icon-caret-down&apos;,
    &apos;circle&apos;: &apos;icon-circle&apos;,
    &apos;close&apos;: &apos;icon-close&apos;,
    &apos;code&apos;: &apos;icon-code&apos;,
    &apos;eraser&apos;: &apos;icon-eraser&apos;,
    &apos;font&apos;: &apos;icon-font&apos;,
    &apos;frame&apos;: &apos;icon-frame&apos;,
    &apos;italic&apos;: &apos;icon-italic&apos;,
    &apos;link&apos;: &apos;icon-link&apos;,
    &apos;unlink&apos;: &apos;icon-chain-broken&apos;,
    &apos;magic&apos;: &apos;icon-magic&apos;,
    &apos;menuCheck&apos;: &apos;icon-check&apos;,
    &apos;minus&apos;: &apos;icon-minus&apos;,
    &apos;orderedlist&apos;: &apos;icon-list-ol&apos;,
    &apos;pencil&apos;: &apos;icon-pencil&apos;,
    &apos;picture&apos;: &apos;icon-picture&apos;,
    &apos;question&apos;: &apos;icon-question&apos;,
    &apos;redo&apos;: &apos;icon-redo&apos;,
    &apos;square&apos;: &apos;icon-square&apos;,
    &apos;strikethrough&apos;: &apos;icon-strikethrough&apos;,
    &apos;subscript&apos;: &apos;icon-subscript&apos;,
    &apos;superscript&apos;: &apos;icon-superscript&apos;,
    &apos;table&apos;: &apos;icon-table&apos;,
    &apos;textHeight&apos;: &apos;icon-text-height&apos;,
    &apos;trash&apos;: &apos;icon-trash&apos;,
    &apos;underline&apos;: &apos;icon-underline&apos;,
    &apos;undo&apos;: &apos;icon-undo&apos;,
    &apos;unorderedlist&apos;: &apos;icon-list-ul&apos;,
    &apos;video&apos;: &apos;icon-facetime-video&apos;
  }
}
</code></pre><p>关于编辑器需要的工具栏toolbar具体属性可查看官网<a href="http://summernote.org/deep-dive/#custom-toolbar-popover" target="_blank" rel="external">summernote-toolbar属性</a></p>
<h3 id="更改工具栏图标"><a href="#更改工具栏图标" class="headerlink" title="更改工具栏图标"></a><strong>更改工具栏图标</strong></h3><p>由于项目中我是直接使用fontawesome，所以我没有再引入summernote.font，直接在options中的icons中修改。但比较麻烦，不知道有什么更好的方法，求指导。</p>
<p>关于图片上传、提交、按键等回调函数也是在options中，详见<a href="http://summernote.org/deep-dive/#callbacks" target="_blank" rel="external">callbacks部分</a>。</p>
<p>初始化一个编辑器很简单。只需要定义<br>    <div class="summernote" id="myid"></div></p>
<pre><code> $(function () {
    $(&apos;.summernote&apos;).summernote();
    //或者
    $(&apos;#myid&apos;).summernote();
});
</code></pre><h3 id="设置placeholder"><a href="#设置placeholder" class="headerlink" title="设置placeholder:"></a><strong>设置placeholder:</strong></h3><pre><code>$(&apos;.summernote&apos;).summernote({
        placeholder:&apos;请输入文章内容&apos;,
        ...
    });
</code></pre><h3 id="设置toolbar"><a href="#设置toolbar" class="headerlink" title="设置toolbar"></a><strong>设置toolbar</strong></h3><pre><code>$(&apos;.summernote&apos;).summernote({
        toolbar:[
            [&apos;style&apos;,[&apos;bold&apos;,&apos;italic&apos;,&apos;underline&apos;,&apos;clear&apos;]],
            [&apos;fontsize&apos;,[&apos;fontsize&apos;]],
            [&apos;para&apos;,[&apos;ul&apos;,&apos;ol&apos;,&apos;paragraph&apos;]],
            [&apos;color&apos;,[&apos;color&apos;]]
        ],
        ...

    });
</code></pre><h3 id="更改图片上传的方式："><a href="#更改图片上传的方式：" class="headerlink" title="更改图片上传的方式："></a><strong>更改图片上传的方式</strong>：</h3><p>需要提及的是，summernote默认的图片上传方式为base64方式。若需要修改，看以下代码。<br>【一定要注意：onImageUpload方法修改时要放在callbacks内配置，否则没用】</p>
<pre><code>$(&apos;#myid&apos;).summernote({
    callbacks:{
        onImageUpload: function(files, editor, $editable) {
            UploadFiles(files,insertImg);
        }
    },
    ...
});

function insertImg(){
    for(i in imageUrl){
        $(&apos;.summernote&apos;).summernote(&apos;editor.insertImage&apos;,imageUrl[i]);
    }
}


function UploadFiles(files,func){
//这里files是因为我设置了可上传多张图片，所以需要依次添加到formData中
    var formData = new FormData();
    for(f in files){
        formData.append(&quot;file&quot;, files[f]);
    }

    $.ajax({
        data: formData,
        type: &quot;POST&quot;,
        url: &quot;/uploadMultipleFile&quot;,
        cache: false,
        contentType: false,
        processData: false,
        success: function(imageUrl) {
            func(imageUrl);

        },
        error: function() {
            console.log(&quot;uploadError&quot;);
        }
    })
}
</code></pre><p>我们项目的后台是用spring+springMVC实现的。后台图片上传代码如下:</p>
<pre><code>@RequestMapping(value = &quot;/uploadMultipleFile&quot;, method = RequestMethod.POST, produces = &quot;application/json;charset=utf8&quot;)
@ResponseBody
public String uploadMultipleFileHandler(@RequestParam(&quot;file&quot;) MultipartFile[] files, HttpServletRequest request) throws IOException {
    return     UploadUtil.uploadImage(request.getServletContext().getRealPath(&quot;/&quot;), files);
}


//UploadUtil.java中uploadImage方法如下
 public static String uploadImage(String serverPath, MultipartFile[] files) {
    try {
        String uploadPath = serverPath + getImageRelativePath();
        String images = &quot;{}&quot;;
        //如果不存在目录,创建一个目录
        isDirectory(uploadPath);
        if (files != null &amp;&amp; files.length &gt; 0) {
            for (int i = 0; i &lt; files.length; i++) {
                MultipartFile file = files[i];
                //save file
                if (!file.isEmpty()) {
                    String savePath = getImageRelativePath() + file.getOriginalFilename();//数据库保存的图片路径
                    images = JSONUtil.addProperty(images, String.valueOf(i), savePath);
                    save(file, uploadPath);
                }
            }
        }
        return images;
    } catch (Exception e) {
        e.printStackTrace();
        return &quot;{}&quot;;
    }
}
</code></pre><h3 id="设置编辑器中的值："><a href="#设置编辑器中的值：" class="headerlink" title="设置编辑器中的值："></a><strong>设置编辑器中的值：</strong></h3><pre><code>$(&apos;#myid&apos;).summernote(&apos;code&apos;,content);
</code></pre><p>需要注意的是，content是html代码，可能存在<strong>引号嵌套</strong>的问题导致报错，记得将引号进行转义。<br>后台处理-java代码：</p>
<pre><code>content = content.replaceAll(&quot;&apos;&quot;,&quot;\\\\&apos;&quot;);
content = content.replaceAll(&quot;\&quot;&quot;, &quot;\\\\\&quot;&quot;);
</code></pre><h3 id="获取编辑器中的值："><a href="#获取编辑器中的值：" class="headerlink" title="获取编辑器中的值："></a><strong>获取编辑器中的值：</strong></h3><pre><code>var content = $(&apos;.summernote&apos;).summernote(&apos;code&apos;);
</code></pre><h3 id="上传附件"><a href="#上传附件" class="headerlink" title="上传附件"></a><strong>上传附件</strong></h3><p>这次项目需要使用附件，但发现summernote貌似没有附件功能，于是自己研究了一下代码，根据项目的需求，在<code>link</code>链接部分进行了修改。<br>效果如下：</p>
<p><img src="http://oao50r2ex.bkt.clouddn.com/image/blog0810_3.png" alt="clipboard.png"></p>
<p>首先，我们先看<code>link</code>按钮所绑定的事件。</p>
<pre><code>context.memo(&apos;button.link&apos;, function () {
        return ui.button({
          contents: ui.icon(options.icons.link),
          tooltip: lang.link.link,
          click: context.createInvokeHandler(&apos;linkDialog.show&apos;)
        }).render();
      });
</code></pre><p>由上面的代码可以发现<code>click</code>事件为：<code>linkDialog.show</code>，那么我们再来看一下<code>linkDialog</code>。</p>
<pre><code>var LinkDialog = function (context) {
    ...
    this.initialize = function () {//初始化
        ...
        var body = &apos;&lt;div class=&quot;form-group&quot;&gt;&apos; +
               &apos;&lt;label&gt;&apos; + lang.link.textToDisplay + &apos;&lt;/label&gt;&apos; +
               &apos;&lt;input class=&quot;note-link-text form-control&quot; type=&quot;text&quot; /&gt;&apos; +
             &apos;&lt;/div&gt;&apos; +
              &apos;&lt;div class=&quot;form-group&quot;&gt;&apos; +
              &apos;&lt;label&gt;&apos; + lang.link.attachment + &apos;&lt;/label&gt;&apos; +
              &apos;&lt;input class=&quot;note-link-attachment form-control&quot; type=&quot;file&quot; /&gt;&apos; +
              &apos;&lt;/div&gt;&apos; +
             &apos;&lt;div class=&quot;form-group&quot;&gt;&apos; +
               &apos;&lt;label&gt;&apos; + lang.link.url + &apos;&lt;/label&gt;&apos; +
               &apos;&lt;input class=&quot;note-link-url form-control&quot; type=&quot;text&quot; value=&quot;http://&quot; /&gt;&apos; +
             &apos;&lt;/div&gt;&apos; +
             (!options.disableLinkTarget ?
               &apos;&lt;div class=&quot;checkbox&quot;&gt;&apos; +
                 &apos;&lt;label&gt;&apos; + &apos;&lt;input type=&quot;checkbox&quot; checked&gt; &apos; + lang.link.openInNewWindow + &apos;&lt;/label&gt;&apos; +
               &apos;&lt;/div&gt;&apos; : &apos;&apos;
             );
        var footer = &apos;&lt;button href=&quot;#&quot; class=&quot;btn btn-primary note-link-btn disabled&quot; disabled&gt;&apos; + lang.link.insert + &apos;&lt;/button&gt;&apos;;

    }
}
</code></pre><p>可以看到，点击链接按钮出现的弹框样式就在<code>LinkDialog</code>的<code>initialize</code>方法中的<code>body</code>，所以我在中间添加了一个<code>input</code>上传附件的部分。</p>
<pre><code>&apos;&lt;div class=&quot;form-group&quot;&gt;&apos; +
&apos;&lt;label&gt;&apos; + lang.link.attachment + &apos;&lt;/label&gt;&apos; +
&apos;&lt;input class=&quot;note-link-attachment form-control&quot; type=&quot;file&quot; /&gt;&apos; +
&apos;&lt;/div&gt;&apos; +
</code></pre><p>那么，我们需要在<code>lang.link</code>属性中，新增一个<code>attachment</code>附件属性。</p>
<p><img src="http://oao50r2ex.bkt.clouddn.com/image/blog0810_4.png" alt="clipboard.png"></p>
<p>除此之外，在中文的转换部分summernote-zh-CN.min.js中，添加<code>link</code>的<code>attachment: &#39;添加附件&#39;</code></p>
<p>好了，那么我们接下来需要处理的问题是上传文件后的处理。</p>
<pre><code>this.showLinkDialog = function (linkInfo) {
    return $.Deferred(function (deferred) {
        ...
        //上传文件的输入框
        $linkAttachment = self.$dialog.find(&apos;.note-link-attachment&apos;),

        ui.onDialogShown(self.$dialog, function () {
            ...
            //对于输入框的事件绑定
            $linkAttachment.on(&apos;change&apos;, function() {
                UploadFiles($linkAttachment.val(),function(url){
                    $linkUrl.val(url);//将上传后的URL赋值到linkUrl的输入框中
                });
            });
        }
    }
}
</code></pre><p>UploadFiles与上述修改上传图片的形式一样。   </p>
<p>如果这篇文章对您有帮助，欢迎点赞。如果有疏漏，欢迎指正。</p>

    
  </div>
</article>

</div>


  <div class="text-center donation">
    <div class="inner-donation">
      <span class="btn-donation">支持一下</span>
      <div class="donation-body">
        <div class="tip text-center">扫一扫，支持小王子</div>
        <ul class="theme.donation.items.length">
        
          <li class="item">
            <img src="/images/qr-wechat.jpg" alt="">
          </li>
        
          <li class="item">
            <img src="/images/qr-alipay.jpg" alt="">
          </li>
        
        </ul>
      </div>
    </div>
  </div>




  <a id="backTop" class="back-top">
    <i class="icon-angle-up"></i>
  </a>




  <div class="modal" id="modal">
  <span id="cover" class="cover hide"></span>
  <div id="modal-dialog" class="modal-dialog hide-dialog">
    <div class="modal-header">
      <span id="close" class="btn-close">关闭</span>
    </div>
    <hr>
    <div class="modal-body">
      <ul class="list-toolbox">
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/archives/"
              target="_self"
              >
              博客
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/category/"
              target="_self"
              >
              分类
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/tag/"
              target="_self"
              >
              标签
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/link/"
              target="_self"
              >
              友链
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/about/"
              target="_self"
              >
              关于
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/atom.xml"
              target="_blank"
              >
              RSS
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/search/"
              target="_self"
              >
              搜索
            </a>
          </li>
        
      </ul>

    </div>
  </div>
</div>



  
      <div class="fexo-comments comments-post">
    
  <section class="disqus-comments">
    <div id="disqus_thread">
      <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>
  </section>

  <script>
    var disqus_shortname = 'forsigner';
    
    var disqus_url = 'http://yoursite.com/2016/08/10/summernote-notes/';
    
    (function(){
      var dsq = document.createElement('script');
      dsq.type = 'text/javascript';
      dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>

  <script id="dsq-count-scr" src="//forsigner.disqus.com/count.js" async></script>



    




  </div>

  

  <script type="text/javascript">
  function loadScript(url, callback) {
    var script = document.createElement('script')
    script.type = 'text/javascript';

    if (script.readyState) { //IE
      script.onreadystatechange = function() {
        if (script.readyState == 'loaded' ||
          script.readyState == 'complete') {
          script.onreadystatechange = null;
          callback();
        }
      };
    } else { //Others
      script.onload = function() {
        callback();
      };
    }

    script.src = url;
    document.getElementsByTagName('head')[0].appendChild(script);
  }

  window.onload = function() {
    loadScript('/js/bundle.js?235683', function() {
      // load success
    });
  }
</script>

</body>
</html>
